# ============================================================
# Database Configuration (for Docker Compose)
# ============================================================
DB_ENGINE=django.db.backends.postgresql
DB_NAME=multivendor_db
DB_USER=postgres
DB_PASSWORD=1mWL!8qU%_I(si@4Hyvo3txPo3@q3FF+9!e#K44^
DB_HOST=db
DB_PORT=5432

# Database connection pooling and timeout settings
DB_CONN_MAX_AGE=600  # Keep connections alive for 10 minutes
DB_CONNECT_TIMEOUT=10  # Connection timeout in seconds

# ============================================================
# Django Configuration
# ============================================================
SECRET_KEY=tfu9y@exp6tdda$%f_+u&o80jd!%ld5@y=iua)$176x5bf(aut
DEBUG=False
ALLOWED_HOSTS=46.249.101.84,indexo.ir,www.indexo.ir,multivendor-backend.indexo.ir,multivendor-frontend.indexo.ir

# ============================================================
# CORS Configuration - Enhanced for Production
# ============================================================
CORS_ALLOWED_ORIGINS=https://indexo.ir,https://www.indexo.ir,https://multivendor-frontend.indexo.ir,http://46.249.101.84
CORS_ALLOW_ALL_ORIGINS=False
CORS_PREFLIGHT_MAX_AGE=86400  # Cache preflight requests for 24 hours

# ============================================================
# Domain Configuration (for SSL and Traefik labels)
# ============================================================
API_DOMAIN=multivendor-backend.indexo.ir
MAIN_DOMAIN=indexo.ir
DOMAIN=indexo.ir
EMAIL=jalal.shajiei67@gmail.com

# ============================================================
# Redis Configuration - Enhanced for Production
# ============================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=  # Leave empty if no password

# Redis Channel Layer Settings
REDIS_CHANNEL_CAPACITY=1000  # Max messages per channel
REDIS_CHANNEL_EXPIRY=60  # Message expiry in seconds
REDIS_CHANNEL_LAYER_CAPACITY=100
REDIS_MAX_CONNECTIONS=50

# Enable Redis caching for better performance
USE_REDIS_CACHE=True

# ============================================================
# CSRF Configuration
# ============================================================
CSRF_TRUSTED_ORIGINS=https://multivendor-backend.indexo.ir,https://indexo.ir,https://www.indexo.ir

# ============================================================
# Security Settings
# ============================================================
USE_TLS=True
SECURE_HSTS_SECONDS=31536000  # 1 year
SESSION_COOKIE_AGE=1209600  # 2 weeks

# ============================================================
# Django REST Framework Settings
# ============================================================
DRF_PAGE_SIZE=20
DRF_ANON_RATE=1000/hour  # Rate limit for anonymous users
DRF_USER_RATE=5000/hour  # Rate limit for authenticated users

# ============================================================
# Upload and Request Settings
# ============================================================
DATA_UPLOAD_MAX_MEMORY_SIZE=10485760  # 10MB
DATA_UPLOAD_MAX_NUMBER_FIELDS=1000
FILE_UPLOAD_MAX_MEMORY_SIZE=10485760  # 10MB

# Zibal Payment Gateway
ZIBAL_MERCHANT=zibal
SITE_URL=https://indexo.ir

# Kavenegar SMS Settings
# Set your own production API key from Kavenegar panel (https://panel.kavenegar.com)
KAVENEGAR_API_KEY=your-kavenegar-api-key-here
KAVENEGAR_OTP_TEMPLATE_NAME=OTPInedexo
KAVENEGAR_SUPPLIER_NOTIF_TEMPLATE_NAME=SupplyerNotif  # For supplier notification SMS
# KAVENEGAR_TEMPLATE_NAME=  # For newsletter SMS (configure separately)

# OTP Configuration
# For development: users.services.otp_senders.LocalOTPSender (OTP shown in console/logs)
# For production: users.services.otp_senders.KavenegarOTPSender (real SMS sending)
OTP_SENDER_CLASS=users.services.otp_senders.LocalOTPSender
OTP_EXPIRATION_MINUTES=5
OTP_RATE_LIMIT_REQUESTS=3
OTP_RATE_LIMIT_WINDOW_MINUTES=15