# Ø³ÛŒØ³ØªÙ… Ú¯ÙØªÚ¯ÙˆÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† - Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„

## ğŸ“‹ Ø®Ù„Ø§ØµÙ‡

Ø³ÛŒØ³ØªÙ… Ú¯ÙØªÚ¯ÙˆÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† Ú©Ø§Ù…Ù„ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª WebSocket Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ù„Ø§Ø¯Ø±Ù†Ú¯ Ø¨ÛŒÙ† Ø®Ø±ÛŒØ¯Ø§Ø±Ø§Ù† Ùˆ ÙØ±ÙˆØ´Ù†Ø¯Ú¯Ø§Ù† Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.

## âœ¨ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡

### Backend (Django)
- âœ… Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ú©Ø§Ù…Ù„ (ChatRoom, ChatMessage, ChatParticipant, GuestSession, TypingStatus)
- âœ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² WebSocket Ø¨Ø§ Django Channels
- âœ… Ù†Ø´Ø§Ù†Ú¯Ø± ØªØ§ÛŒÙ¾ Ú©Ø±Ø¯Ù† (Typing Indicators)
- âœ… Ø±Ø³ÛŒØ¯ Ø®ÙˆØ§Ù†Ø¯Ù† Ù¾ÛŒØ§Ù… (Read Receipts)
- âœ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ù‡Ù…Ø§Ù† (Guest Users)
- âœ… API Ù‡Ø§ÛŒ RESTful Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ú†Øª
- âœ… Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ùˆ ÙØ±ÙˆØ´Ù†Ø¯Ú¯Ø§Ù†
- âœ… Ø¯Ø³ØªÙˆØ± Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ (3 Ù…Ø§Ù‡)
- âœ… Ø³ÛŒØ³ØªÙ… Ù…Ø¬ÙˆØ²Ù‡Ø§ (Permissions)

### Frontend (Nuxt 3)
- âœ… Pinia Store Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ¶Ø¹ÛŒØª Ú†Øª
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø§ØªØµØ§Ù„ WebSocket Ø¨Ø§ Reconnect Ø®ÙˆØ¯Ú©Ø§Ø±
- âœ… Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§ÛŒ UI Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ RTL Ùˆ ÙØ§Ø±Ø³ÛŒ
- âœ… Ø¯Ú©Ù…Ù‡ Ú†Øª Ø¯Ø± ØµÙØ­Ø§Øª Ù…Ø­ØµÙˆÙ„
- âœ… Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ú†Øªâ€ŒÙ‡Ø§
- âœ… ØµÙØ­Ù‡ ØµÙ Ú†Øª Ø¨Ø±Ø§ÛŒ ÙØ±ÙˆØ´Ù†Ø¯Ú¯Ø§Ù†
- âœ… ÙˆÛŒØ¬Øª Ú†Øª Ø´Ù†Ø§ÙˆØ± Ø¯Ø± Ú©Ù„ Ø³Ø§ÛŒØª

### Infrastructure
- âœ… Redis Ø¨Ø±Ø§ÛŒ Channel Layer
- âœ… Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Nginx Ø¨Ø±Ø§ÛŒ WebSocket
- âœ… Docker Compose Ø¨Ø§ Redis

---

## ğŸ“ Ø³Ø§Ø®ØªØ§Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§

### Backend Files
```
multivendor_platform/multivendor_platform/chat/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ apps.py
â”œâ”€â”€ models.py              # Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
â”œâ”€â”€ admin.py               # Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Django
â”œâ”€â”€ consumers.py           # WebSocket Consumer
â”œâ”€â”€ serializers.py         # DRF Serializers
â”œâ”€â”€ views.py               # API Views
â”œâ”€â”€ urls.py                # URL Routing
â”œâ”€â”€ permissions.py         # Custom Permissions
â”œâ”€â”€ routing.py             # WebSocket Routing
â””â”€â”€ management/
    â””â”€â”€ commands/
        â””â”€â”€ cleanup_old_messages.py
```

### Frontend Files
```
front_end/nuxt/
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ chat.ts            # Pinia Store
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ ChatWidget.vue       # ÙˆÛŒØ¬Øª Ø´Ù†Ø§ÙˆØ±
â”‚   â”‚   â”œâ”€â”€ ChatPanel.vue        # Ù„ÛŒØ³Øª Ø§ØªØ§Ù‚â€ŒÙ‡Ø§
â”‚   â”‚   â””â”€â”€ ChatRoom.vue         # ØµÙØ­Ù‡ Ú¯ÙØªÚ¯Ùˆ
â”‚   â””â”€â”€ product/
â”‚       â””â”€â”€ ProductChatButton.vue
â””â”€â”€ pages/
    â”œâ”€â”€ admin/
    â”‚   â””â”€â”€ chats.vue            # Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†
    â””â”€â”€ vendor/
        â””â”€â”€ chats.vue            # ØµÙ Ú†Øª ÙØ±ÙˆØ´Ù†Ø¯Ù‡
```

---

## ğŸš€ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ùˆ Ø§Ø³ØªÙ‚Ø±Ø§Ø±

### 1. Ù†ØµØ¨ Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒØªÙˆÙ†
```bash
pip install -r requirements.txt
```

Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡:
- `channels==4.0.0`
- `channels-redis==4.1.0`
- `daphne==4.0.0`
- `redis==5.0.1`

### 2. Ø§Ø¬Ø±Ø§ÛŒ Migration Ù‡Ø§ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
```bash
cd multivendor_platform/multivendor_platform
python manage.py makemigrations chat
python manage.py migrate
```

### 3. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¨Ø§ Docker
```bash
# Build Ùˆ Ø§Ø¬Ø±Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
docker-compose up -d --build

# Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§
docker-compose logs -f backend
docker-compose logs -f redis
```

### 4. ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø­ÛŒØ· (.env)
Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø¨Ù‡ ÙØ§ÛŒÙ„ `.env`:
```env
# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
```

---

## ğŸ”Œ API Endpoints

### Chat Endpoints

#### 1. Ø§ÛŒØ¬Ø§Ø¯ Session Ù…Ù‡Ù…Ø§Ù†
```http
POST /api/chat/guest-session/
Content-Type: application/json

{
  "identifier": "browser-fingerprint-or-identifier"
}

Response: {
  "session_id": "uuid",
  "identifier": "string",
  "created_at": "datetime"
}
```

#### 2. Ø´Ø±ÙˆØ¹ Ú¯ÙØªÚ¯Ùˆ
```http
POST /api/chat/start/
Content-Type: application/json

{
  "vendor_id": 1,
  "product_id": 123,  // Ø§Ø®ØªÛŒØ§Ø±ÛŒ
  "initial_message": "Ø³Ù„Ø§Ù…",  // Ø§Ø®ØªÛŒØ§Ø±ÛŒ
  "guest_session_id": "uuid"  // Ø¨Ø±Ø§ÛŒ Ù…Ù‡Ù…Ø§Ù†â€ŒÙ‡Ø§
}

Response: ChatRoom object
```

#### 3. Ù„ÛŒØ³Øª Ø§ØªØ§Ù‚â€ŒÙ‡Ø§ÛŒ Ú†Øª
```http
GET /api/chat/rooms/
Authorization: Token <token>

Response: [ChatRoom, ...]
```

#### 4. Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ ÛŒÚ© Ø§ØªØ§Ù‚
```http
GET /api/chat/rooms/{room_id}/messages/?page=1&page_size=50
Authorization: Token <token>

Response: {
  "count": 100,
  "next": "url",
  "previous": "url",
  "results": [ChatMessage, ...]
}
```

#### 5. Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø®ÙˆØ§Ù†Ø¯Ù‡ Ø´Ø¯Ù‡
```http
POST /api/chat/rooms/{room_id}/mark_read/
Authorization: Token <token>
```

#### 6. Ù„ÛŒØ³Øª Ú†Øªâ€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´Ù†Ø¯Ù‡
```http
GET /api/chat/vendor/rooms/
Authorization: Token <vendor-token>
```

#### 7. Ù„ÛŒØ³Øª ØªÙ…Ø§Ù… Ú†Øªâ€ŒÙ‡Ø§ (Ø§Ø¯Ù…ÛŒÙ†)
```http
GET /api/chat/admin/rooms/?search=query
Authorization: Token <admin-token>
```

#### 8. Ù„ÛŒÙ†Ú© Ú©Ø±Ø¯Ù† Session Ù…Ù‡Ù…Ø§Ù†
```http
POST /api/chat/link-guest-session/
Authorization: Token <token>
Content-Type: application/json

{
  "guest_session_id": "uuid"
}
```

---

## ğŸ”Œ WebSocket Protocol

### Ø§ØªØµØ§Ù„
```javascript
const ws = new WebSocket('ws://domain.com/ws/chat/?token=AUTH_TOKEN')
// ÛŒØ§ Ø¨Ø±Ø§ÛŒ Ù…Ù‡Ù…Ø§Ù†:
const ws = new WebSocket('ws://domain.com/ws/chat/?guest_session=GUEST_ID')
```

### Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ±

#### Join Room
```json
{
  "type": "join_room",
  "room_id": "room-uuid"
}
```

#### Send Message
```json
{
  "type": "send_message",
  "room_id": "room-uuid",
  "content": "Ù…ØªÙ† Ù¾ÛŒØ§Ù…"
}
```

#### Mark Read
```json
{
  "type": "mark_read",
  "room_id": "room-uuid"
}
```

#### Typing Indicator
```json
{
  "type": "typing",
  "room_id": "room-uuid",
  "is_typing": true
}
```

#### Leave Room
```json
{
  "type": "leave_room",
  "room_id": "room-uuid"
}
```

### Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ Ø§Ø² Ø³Ø±ÙˆØ±

#### Connection Established
```json
{
  "type": "connection_established",
  "user": "username",
  "guest_session": "uuid-if-guest"
}
```

#### New Message
```json
{
  "type": "message",
  "message_id": "uuid",
  "room_id": "room-uuid",
  "sender": 1,
  "sender_username": "username",
  "content": "text",
  "created_at": "iso-datetime",
  "is_read": false
}
```

#### Typing Status
```json
{
  "type": "typing",
  "room_id": "room-uuid",
  "user_id": 1,
  "username": "username",
  "is_typing": true
}
```

#### Read Receipt
```json
{
  "type": "read_receipt",
  "room_id": "room-uuid",
  "user_id": 1
}
```

---

## ğŸ’» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Frontend

### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Pinia Store

```vue
<script setup>
import { useChatStore } from '~/stores/chat'

const chatStore = useChatStore()

// Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ú†Øª
onMounted(async () => {
  await chatStore.initializeChat()
})

// Ø´Ø±ÙˆØ¹ Ú¯ÙØªÚ¯Ùˆ Ø¨Ø§ ÙØ±ÙˆØ´Ù†Ø¯Ù‡
const startChatWithVendor = async (vendorId, productId) => {
  const room = await chatStore.startChat(vendorId, productId)
  console.log('Chat started:', room)
}

// Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…
const sendMsg = () => {
  chatStore.sendMessage(roomId, messageText)
}

// Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ù†Ø´Ø§Ù†Ú¯Ø± ØªØ§ÛŒÙ¾
const handleTyping = () => {
  chatStore.setTyping(roomId, true)
}
</script>
```

### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ChatWidget
```vue
<template>
  <div>
    <!-- ÙˆÛŒØ¬Øª Ú†Øª Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø± layout Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ -->
    <ChatWidget />
  </div>
</template>
```

### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ProductChatButton
```vue
<template>
  <ProductChatButton 
    :product-id="product.id" 
    :vendor-id="product.vendor_id" 
  />
</template>
```

---

## ğŸ”§ Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ

### Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ
```bash
# Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ Ø§Ø² 90 Ø±ÙˆØ²
python manage.py cleanup_old_messages

# Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ Ø§Ø² 30 Ø±ÙˆØ²
python manage.py cleanup_old_messages --days=30
```

### Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Redis
```bash
# ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù† Ø¨Ù‡ Redis Container
docker exec -it multivendor_redis redis-cli

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
redis-cli> PING
redis-cli> INFO
redis-cli> CLIENT LIST
```

### Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ WebSocket
```bash
docker-compose logs -f backend | grep "WebSocket"
```

---

## ğŸ“± ØµÙØ­Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ

### Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†
- URL: `/admin/chats`
- Ø¯Ø³ØªØ±Ø³ÛŒ: ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ†â€ŒÙ‡Ø§
- Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§:
  - Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÙ…Ø§Ù… Ú¯ÙØªÚ¯ÙˆÙ‡Ø§
  - Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú¯ÙØªÚ¯ÙˆÙ‡Ø§
  - Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ
  - Ù†Ø¸Ø§Ø±Øª Ø¨Ø± Ù…Ú©Ø§Ù„Ù…Ø§Øª

### ØµÙØ­Ù‡ ÙØ±ÙˆØ´Ù†Ø¯Ù‡
- URL: `/vendor/chats`
- Ø¯Ø³ØªØ±Ø³ÛŒ: ÙÙ‚Ø· ÙØ±ÙˆØ´Ù†Ø¯Ú¯Ø§Ù†
- Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§:
  - ØµÙ Ú¯ÙØªÚ¯ÙˆÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ø´
  - Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ§Ù†Ø¯Ù‡ Ù†Ø´Ø¯Ù‡
  - Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹
  - Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­ØµÙˆÙ„

---

## ğŸ¨ Ø³ÙØ§Ø±Ø´ÛŒâ€ŒØ³Ø§Ø²ÛŒ UI

### ØªØºÛŒÛŒØ± Ù…ÙˆÙ‚Ø¹ÛŒØª ÙˆÛŒØ¬Øª Ú†Øª
Ø¯Ø± ÙØ§ÛŒÙ„ `ChatWidget.vue`:
```css
.chat-widget {
  position: fixed;
  bottom: 20px;
  left: 20px;  /* ØªØºÛŒÛŒØ± Ø¨Ù‡ right Ø¨Ø±Ø§ÛŒ Ø³Ù…Øª Ø±Ø§Ø³Øª */
}
```

### ØªØºÛŒÛŒØ± Ø±Ù†Ú¯â€ŒÙ‡Ø§
Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ÛŒ (Own Messages):
```css
.message-own .message-bubble {
  background-color: #4caf50;  /* ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ */
}
```

### ØªØºÛŒÛŒØ± Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù¾Ù†Ù„
Ø¯Ø± ÙØ§ÛŒÙ„ `ChatWidget.vue`:
```css
.chat-panel {
  width: 380px;  /* ØªØºÛŒÛŒØ± Ø¹Ø±Ø¶ */
  height: 500px;  /* ØªØºÛŒÛŒØ± Ø§Ø±ØªÙØ§Ø¹ */
}
```

---

## ğŸ› Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ (Troubleshooting)

### WebSocket Ø§ØªØµØ§Ù„ Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯
1. Ø¨Ø±Ø±Ø³ÛŒ Redis:
```bash
docker exec multivendor_redis redis-cli ping
```

2. Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Backend:
```bash
docker-compose logs backend | tail -100
```

3. Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Nginx:
```bash
docker exec multivendor_nginx nginx -t
```

### Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
1. Ø¨Ø±Ø±Ø³ÛŒ Ø§ØªØµØ§Ù„ WebSocket Ø¯Ø± Console Ù…Ø±ÙˆØ±Ú¯Ø±
2. Ø¨Ø±Ø±Ø³ÛŒ Token ÛŒØ§ Guest Session
3. Ø¨Ø±Ø±Ø³ÛŒ Permissions Ø¯Ø± Backend

### Ù…Ø´Ú©Ù„ Ø¯Ø± Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
1. Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Cache Ù…Ø±ÙˆØ±Ú¯Ø±
2. Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Console Ø¨Ø±Ø§ÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript
3. Ø¨Ø±Ø±Ø³ÛŒ API Response Ù‡Ø§ Ø¯Ø± Network Tab

---

## ğŸ“Š Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³

### ChatRoom
- `room_id`: UUID ÛŒÚ©ØªØ§
- `participants`: Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¹Ø¶Ùˆ (M2M)
- `product`: Ù…Ø­ØµÙˆÙ„ Ù…Ø±ØªØ¨Ø· (nullable)
- `guest_session`: Session Ù…Ù‡Ù…Ø§Ù† (nullable)
- `is_archived`: Ø¢Ø±Ø´ÛŒÙˆ Ø´Ø¯Ù‡
- `created_at`, `updated_at`

### ChatMessage
- `id`: UUID
- `room`: Ø§ØªØ§Ù‚ Ú†Øª
- `sender`: ÙØ±Ø³ØªÙ†Ø¯Ù‡ (nullable Ø¨Ø±Ø§ÛŒ Ù…Ù‡Ù…Ø§Ù†)
- `guest_session`: Session Ù…Ù‡Ù…Ø§Ù†
- `content`: Ù…ØªÙ† Ù¾ÛŒØ§Ù…
- `is_read`: Ø®ÙˆØ§Ù†Ø¯Ù‡ Ø´Ø¯Ù‡
- `read_at`: Ø²Ù…Ø§Ù† Ø®ÙˆØ§Ù†Ø¯Ù†
- `created_at`

### GuestSession
- `session_id`: UUID
- `identifier`: Ø´Ù†Ø§Ø³Ù‡ Ù…Ø±ÙˆØ±Ú¯Ø±
- `linked_user`: Ú©Ø§Ø±Ø¨Ø± Ù„ÛŒÙ†Ú© Ø´Ø¯Ù‡
- `created_at`

### ChatParticipant
- `room`: Ø§ØªØ§Ù‚
- `user`: Ú©Ø§Ø±Ø¨Ø±
- `joined_at`: Ø²Ù…Ø§Ù† Ù¾ÛŒÙˆØ³ØªÙ†
- `last_read_at`: Ø¢Ø®Ø±ÛŒÙ† Ø²Ù…Ø§Ù† Ø®ÙˆØ§Ù†Ø¯Ù†

---

## ğŸ” Ø§Ù…Ù†ÛŒØª

### Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡: Token Authentication
- Ù…Ù‡Ù…Ø§Ù†â€ŒÙ‡Ø§: Guest Session Ø¨Ø§ UUID

### Ù…Ø¬ÙˆØ²Ù‡Ø§
- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙÙ‚Ø· Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ø´Ø§Ù† Ø±Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù†Ø¯
- ÙØ±ÙˆØ´Ù†Ø¯Ú¯Ø§Ù† ÙÙ‚Ø· Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø®ÙˆØ¯Ø´Ø§Ù†
- Ø§Ø¯Ù…ÛŒÙ†â€ŒÙ‡Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù‡Ù…Ù‡

### Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
- Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Room Ø¯Ø± WebSocket
- Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø¯Ø± API
- Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù¾ÛŒØ§Ù…

---

## ğŸš€ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ø¹Ù…Ù„Ú©Ø±Ø¯

### Redis Configuration
Ø¨Ø±Ø§ÛŒ ProductionØŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø²ÛŒØ± Ø±Ø§ Ø¯Ø± Ù†Ø¸Ø± Ø¨Ú¯ÛŒØ±ÛŒØ¯:
```bash
# Ø¯Ø± ÙØ§ÛŒÙ„ redis.conf
maxmemory 256mb
maxmemory-policy allkeys-lru
```

### Database Indexing
Index Ù‡Ø§ÛŒ Ù…Ù‡Ù… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡:
- `ChatRoom.room_id`
- `ChatRoom.updated_at`
- `ChatMessage.created_at`
- `ChatMessage.room + created_at`

### WebSocket Connection Pooling
ØªÙ†Ø¸ÛŒÙ…Ø§Øª Nginx Ø¨Ø±Ø§ÛŒ Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ:
```nginx
upstream backend {
    least_conn;
    server backend1:8000;
    server backend2:8000;
}
```

---

## ğŸ“ TODO Ù‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)

- [ ] ÙØ§ÛŒÙ„ Ùˆ ØªØµÙˆÛŒØ± Ø¯Ø± Ú†Øª
- [ ] Voice Messages
- [ ] Video Chat
- [ ] Push Notifications (Ø¨Ø±Ø§ÛŒ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Flutter)
- [ ] Chat Encryption (E2E)
- [ ] Message Search
- [ ] Chat Export
- [ ] Scheduled Messages
- [ ] Auto-responses
- [ ] Chat Analytics Dashboard

---

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

Ø¨Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„Ø§Øª Ùˆ Ø³ÙˆØ§Ù„Ø§Øª:
1. Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Docker
2. Ø¨Ø±Ø±Ø³ÛŒ Console Ù…Ø±ÙˆØ±Ú¯Ø±
3. Ù…Ø·Ø§Ù„Ø¹Ù‡ Troubleshooting Guide
4. Ø¨Ø±Ø±Ø³ÛŒ Django Admin Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú†Øª

---

## ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ Ù…ÙÛŒØ¯

- [Django Channels Documentation](https://channels.readthedocs.io/)
- [Redis Documentation](https://redis.io/documentation)
- [WebSocket Protocol](https://datatracker.ietf.org/doc/html/rfc6455)
- [Pinia Documentation](https://pinia.vuejs.org/)
- [Vuetify Components](https://vuetifyjs.com/)

---

**ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯**: {{ current_date }}  
**ÙˆØ¶Ø¹ÛŒØª**: âœ… Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Production  
**Ù†Ø³Ø®Ù‡**: 1.0.0





